# ディレクトリ構造改善提案

## 概要

本ドキュメントでは、FizzBuzzの複数言語実装プロジェクトにおけるディレクトリ構造改善の提案を行います。適切なディレクトリ構造は、コードの整理、管理、および将来的な拡張を容易にします。また、新規開発者がプロジェクトを理解するための助けにもなります。

## 目次

1. [現在の構造](#現在の構造)
2. [問題点](#問題点)
3. [提案する構造](#提案する構造)
4. [提案の詳細説明](#提案の詳細説明)
5. [移行計画](#移行計画)

## 現在の構造

現在のプロジェクト構造は以下のようになっています：

```
.
├── .git/
├── .github/
│   └── ISSUE_TEMPLATE/
├── Makefile
├── docs/
├── fizbuzz.c        # Cの実装（ファイル名にtypo）
├── fizbuzz.rb       # Rubyの実装（ファイル名にtypo）
├── fizzbuzz.go      # Goの実装
├── fizzbuzz.rs      # Rustの実装
└── fizzbuzz_test.go # Goのテスト
```

## 問題点

現在の構造には以下の問題があります：

1. **言語ごとの分離がない**:
   - すべてのソースファイルがルートディレクトリに配置されている
   - 各言語のファイルが混在していて整理されていない

2. **ファイル命名の一貫性がない**:
   - 一部のファイルは `fizbuzz` と綴られ、他は `fizzbuzz` と綴られている

3. **テストの整理がされていない**:
   - Goのみテストファイルが存在し、他言語にはない
   - テストファイルがソースファイルと同じディレクトリに混在

4. **将来の拡張が難しい**:
   - 言語ごとの追加ファイル（設定ファイルなど）をどこに配置するか不明瞭
   - 新しい言語実装を追加する際の場所が決まっていない

## 提案する構造

以下のディレクトリ構造への変更を提案します：

```
.
├── .git/
├── .github/
│   ├── ISSUE_TEMPLATE/
│   └── workflows/        # CI/CD設定用ディレクトリ
├── Makefile              # プロジェクト全体のビルド設定
├── README.md             # プロジェクト説明用README
├── docs/                 # ドキュメント
│   ├── improvement-proposals.md
│   ├── ci-cd-proposal.md
│   ├── code-consistency-proposal.md
│   ├── directory-structure-proposal.md
│   └── ...
├── src/                  # すべてのソースコード
│   ├── c/                # C言語実装
│   │   ├── fizzbuzz.c
│   │   └── tests/        # Cのテスト
│   │       └── test_fizzbuzz.c
│   ├── go/               # Go実装
│   │   ├── fizzbuzz.go
│   │   └── fizzbuzz_test.go
│   ├── ruby/             # Ruby実装
│   │   ├── fizzbuzz.rb
│   │   └── test_fizzbuzz.rb
│   └── rust/             # Rust実装
│       ├── Cargo.toml    # Rustプロジェクト設定
│       ├── src/
│       │   └── main.rs   # メインプログラム
│       └── tests/        # Rustのテスト
│           └── fizzbuzz_test.rs
└── scripts/              # ビルド・開発用スクリプト
    ├── setup.sh          # 開発環境セットアップ用
    └── benchmark.sh      # パフォーマンス測定用
```

## 提案の詳細説明

### 1. `src/` ディレクトリ

ソースコードを言語ごとに分離し、`src/` ディレクトリの下に配置します：

- **言語固有のディレクトリ**: 各言語の実装をそれぞれのディレクトリに分離
- **専用テストディレクトリ**: 言語によっては、テストを別のディレクトリに分離
- **言語固有の設定ファイル**: 必要に応じて言語固有の設定ファイル（例：`Cargo.toml`）を追加

### 2. `docs/` ディレクトリ

プロジェクトに関するドキュメントを一元管理します：

- **特定言語の説明**: 各言語固有の詳細やベストプラクティス
- **改善提案**: 今後の改善に関する提案ドキュメント
- **チュートリアル**: 使い方や拡張方法に関するガイド

### 3. `.github/workflows/` ディレクトリ

CI/CDパイプラインの設定ファイルを格納します：

- **ビルドとテスト**: 自動テストとビルドを行うワークフロー
- **リンターとフォーマッター**: コード品質チェックを行うワークフロー
- **デプロイ**: 必要に応じたデプロイワークフロー

### 4. `scripts/` ディレクトリ

プロジェクトの開発や実行に関連するスクリプトを格納します：

- **セットアップスクリプト**: 新しい開発者が環境を構築するためのスクリプト
- **ビルドスクリプト**: 複雑なビルドプロセスをラップするスクリプト
- **ユーティリティ**: その他の便利なスクリプト

## 移行計画

提案された構造への移行は、以下の段階を踏むことを推奨します：

### フェーズ 1: 基本構造の作成

1. `src/` ディレクトリの作成と言語ごとのサブディレクトリ作成
2. 既存ファイルの修正と移動（ファイル名のtypoも修正）
3. Makefileの更新（新しいパスに対応）

### フェーズ 2: テストの整理

1. 各言語にテストを追加
2. 言語ごとの適切なテスト構造を採用

### フェーズ 3: GitHub Actions設定

1. `.github/workflows/` ディレクトリの作成
2. CI/CDワークフローファイルの追加

### フェーズ 4: ドキュメント整備

1. READMEの改善
2. 詳細なドキュメントの追加

### フェーズ 5: スクリプト追加

1. 開発環境セットアップスクリプトの追加
2. その他の便利なスクリプトの追加

## 期待される効果

この改善により、以下のメリットが期待できます：

1. **コードの整理**: 言語ごとに分離されることでコードの整理が向上
2. **拡張性の向上**: 新しい言語や機能を追加する場所が明確
3. **開発者体験の向上**: プロジェクト構造が明確になり、理解しやすくなる
4. **CI/CD統合の容易化**: 標準的な構造により、CI/CDツールとの統合が容易になる
5. **保守性の向上**: 長期的な保守が容易になる

---

このドキュメントは随時更新されます。最終更新日: 2025-03-15